# *** WARNING! ***
# Modification to this file only take effect after running
# generate-wrappers-and-manifest.py

# See python/mozbuild/mozbuild/mozinfo.py for incoming data.

##########
# android_version strings
#   https://en.wikipedia.org/wiki/Android_version_history
#   * Android 'Gingerbread' 2.3-2.3.2: 9
#   * Android 'Gingerbread' 2.3.3+: 10
#   * Android 'ICS' 4.0-4.0.2: 14
#   * Android 'ICS' 4.0.3+: 15
#   * Android 'Jellybean' 4.3: 18

##########
# os_version strings
#   https://msdn.microsoft.com/en-us/library/windows/desktop/ms724832%28v=vs.85%29.aspx
#   * Windows XP: 5.1
#   * Windows XP 64-bit: 5.2
#   * Windows Vista: 6.0
#   * Windows 7: 6.1
#   * Windows 8: 6.2
#   * Windows 8.1: 6.3
#   * Windows 10: 10.0

[DEFAULT]
subsuite = webgl
# No e10s yet.
# 'B2G Desktop Linux' fails to create WebGL contexts.
# Also skip B2G for now, until we get a handle on the longer tail of emulator
# bugs.
# Bug 1136181 disabled on B2G Desktop and Mulet for intermittent failures
skip-if = e10s || (os == 'b2g') || (os == 'linux' && (buildapp == 'b2g' || buildapp == 'mulet'))

[generated/test_.mozilla__always-fail.html]
fail-if = 1

########################################################################
# Complicated
[generated/test_conformance__glsl__functions__glsl-function-sin.html]
fail-if = (os == 'android' && (android_version == '9' || android_version == '18')) || (os == 'b2g') || (os == 'linux')

[generated/test_conformance__misc__object-deletion-behaviour.html]
fail-if = (os == 'android' && (android_version == '9' || android_version == '18')) || (os == 'b2g')

[generated/test_conformance__textures__texture-mips.html]
# Android 2.3, 4.0, and 4.3
fail-if = (os == 'android') || (os == 'b2g') || (os == 'linux')

[generated/test_conformance__textures__texture-npot.html]
fail-if = (os == 'android' && (android_version == '9' || android_version == '18')) || (os == 'b2g')
# Intermittent fail on Android 4.0.
skip-if = (os == 'android' && android_version == '14')

[generated/test_conformance__textures__texture-size-cube-maps.html]
fail-if = (os == 'android' && android_version == '18') || (os == 'b2g') || (os == 'linux')
# Crashes on Android 4.0.
skip-if = (os == 'android' && android_version == '14')

[generated/test_conformance__textures__texture-size.html]
fail-if = (os == 'mac' && os_version == '10.8') || (os == 'b2g')
skip-if = (os == 'android' && android_version == '14')

[generated/test_conformance__textures__tex-image-with-format-and-type.html]
# Crashes or blues on Android 2.3
skip-if = (os == 'android') || (os == 'b2g') || (os == 'linux')
fail-if = (os == 'android' && (android_version == '14' || android_version == '18'))

[generated/test_conformance__misc__type-conversion-test.html]
fail-if = (os == 'linux')
# Resets device on Android 2.3.
# Crashes on B2G ICS Emulator, desktop Linux, and Mulet Linux x64.
skip-if = (os == 'android') || (os == 'b2g') || (os == 'linux')

########################################################################
# "tst-linux{32,64}-spot-NNN" Slaves and Windows
[generated/test_conformance__textures__tex-image-and-sub-image-2d-with-video.html]
# Random fail on Android 2.3.
# Crashes on Mulet Linux x64 and B2G ICS Emulator.
# Intermittent crash on Windows.
skip-if = (os == 'android' && android_version == '9') || (os == 'b2g') || (os == 'linux') || (os == 'win')

########################################################################
# "tst-linux{32,64}-spot-NNN" Slaves:
#   Android 2.3, B2G Emu, Linux, and Mulet.
# Android: os == 'android'. (Not enough info to separate out 2.3)
# B2G Emu: os == 'b2g'.
# Linux: os == 'linux'.
# Mulet: os == 'b2g' && buildapp == 'mulet'.
[generated/test_conformance__misc__invalid-passed-params.html]
# Causes consistent *blues*: "DMError: Remote Device Error: unable to
# connect to 127.0.0.1 after 5 attempts" on 'Android 2.3 Opt'.
skip-if = (os == 'android') || (os == 'b2g') || (os == 'linux')
[generated/test_conformance__reading__read-pixels-test.html]
# Causes consistent *blues*: "DMError: Remote Device Error: unable to
# connect to 127.0.0.1 after 5 attempts" on 'Android 2.3 Opt'.
# Crashes near on B2G ICS Emulator.
skip-if = (os == 'android') || (os == 'b2g') || (os == 'linux')
[generated/test_conformance__textures__gl-teximage.html]
# Crashes on Android 2.3.
# Crashes near on B2G ICS Emulator.
skip-if = (os == 'android') || (os == 'b2g') || (os == 'linux')
[generated/test_conformance__textures__tex-input-validation.html]
# Crashes on 'Android 2.3'
# Asserts on 'B2G ICS Emulator Debug'.
skip-if = (os == 'android') || (os == 'b2g') || (os == 'linux')

########################################################################
# Android+Win
[generated/test_conformance__textures__texture-npot-video.html]
# Intermittant crash on Windows
# Timeouts on Android. (Should be fixed by updating our suite)
skip-if = (os == 'android') || (os == 'win')

########################################################################
# Android and Linux
[generated/test_conformance__glsl__bugs__temp-expressions-should-not-crash.html]
# Coincidentally enough, crashes on Linux and Android 4.0.
skip-if = (os == 'android') || (os == 'linux')

########################################################################
# B2G and Linux
[generated/test_conformance__context__context-attributes-alpha-depth-stencil-antialias.html]
# Asserts on 'B2G ICS Emulator Debug' and linux debug.
skip-if = (os == 'b2g') || (os == 'linux')

########################################################################
# Android and Mac
[generated/test_conformance__extensions__oes-vertex-array-object.html]
# Crashes in driver on android 4.0 slaves and on Mac
skip-if = (os == 'android' && android_version == '14') || (os == 'mac')
fail-if = (os == 'android' && android_version == '18')

[generated/test_conformance__limits__gl-max-texture-dimensions.html]
fail-if = (os == 'android' && android_version == '14') || (os == 'mac' && os_version == '10.8')

########################################################################
########################################################################
# Android
[generated/test_conformance__extensions__oes-texture-float.html]
fail-if = (os == 'android' && (android_version == '9' || android_version == '18')

[generated/test_conformance__canvas__buffer-offscreen-test.html]
# Causes frequent *blues*: "DMError: Remote Device Error: unable to
# connect to 127.0.0.1 after 5 attempts" on 'Android 2.3 Opt'.
skip-if = (os == 'android' && android_version == '9')

####################
# 4.0 failures
[generated/test_conformance__glsl__functions__glsl-function-abs.html]
fail-if = (os == 'android' && android_version == '14')
[generated/test_conformance__glsl__functions__glsl-function-faceforward.html]
fail-if = (os == 'android' && android_version == '14')
[generated/test_conformance__glsl__functions__glsl-function-sign.html]
fail-if = (os == 'android' && android_version == '14')
[generated/test_conformance__glsl__functions__glsl-function-smoothstep-float.html]
fail-if = (os == 'android' && android_version == '14')
[generated/test_conformance__glsl__functions__glsl-function-step-float.html]
fail-if = (os == 'android' && android_version == '14')
[generated/test_conformance__glsl__functions__glsl-function-step-gentype.html]
fail-if = (os == 'android' && android_version == '14')
[generated/test_conformance__limits__gl-min-textures.html]
fail-if = (os == 'android' && android_version == '14')
[generated/test_conformance__rendering__draw-elements-out-of-bounds.html]
fail-if = (os == 'android' && android_version == '14')
[generated/test_conformance__state__gl-get-calls.html]
fail-if = (os == 'android' && android_version == '14')
[generated/test_conformance__textures__tex-sub-image-2d.html]
fail-if = (os == 'android' && android_version == '14')

####################
# 2.3 failures
[generated/test_conformance__programs__program-test.html]
fail-if = (os == 'android' && android_version == '9')

####################
# Timeouts
[generated/test_conformance__context__context-release-upon-reload.html]
skip-if = (os == 'android')
[generated/test_conformance__context__context-release-with-workers.html]
skip-if = (os == 'android')

####################
# Timeout on 2.3
[generated/test_conformance__misc__delayed-drawing.html]
skip-if = (os == 'android' && android_version == '9')
[generated/test_conformance__misc__shader-precision-format.html]
skip-if = (os == 'android' && android_version == '9')
[generated/test_conformance__more__conformance__webGLArrays.html]
skip-if = (os == 'android' && android_version == '9')
[generated/test_conformance__more__functions__bufferData.html]
skip-if = (os == 'android' && android_version == '9')
[generated/test_conformance__more__functions__bufferDataBadArgs.html]
skip-if = (os == 'android' && android_version == '9')
[generated/test_conformance__more__functions__bufferSubData.html]
skip-if = (os == 'android' && android_version == '9')
[generated/test_conformance__more__functions__bufferSubDataBadArgs.html]
skip-if = (os == 'android' && android_version == '9')
[generated/test_conformance__more__functions__drawArrays.html]
skip-if = (os == 'android' && android_version == '9')
[generated/test_conformance__more__functions__drawArraysOutOfBounds.html]
skip-if = (os == 'android' && android_version == '9')
[generated/test_conformance__more__functions__drawElements.html]
skip-if = (os == 'android' && android_version == '9')
[generated/test_conformance__more__functions__drawElementsBadArgs.html]
skip-if = (os == 'android' && android_version == '9')
[generated/test_conformance__more__functions__texImage2DHTML.html]
skip-if = (os == 'android' && android_version == '9')

####################
# Crashes
[generated/test_conformance__misc__uninitialized-test.html]
skip-if = (os == 'android')
[generated/test_conformance__renderbuffers__framebuffer-object-attachment.html]
skip-if = (os == 'android')

####################
# Crashes with OOM on android 2.3 slaves
[generated/test_conformance__attribs__gl-bindAttribLocation-aliasing.html]
skip-if = (os == 'android' && android_version == '9')
[generated/test_conformance__attribs__gl-bindAttribLocation-matrix.html]
skip-if = (os == 'android' && android_version == '9')

####################
# Crashes on android 4.0 slaves
[generated/test_conformance__extensions__webgl-depth-texture.html]
skip-if = (os == 'android' && android_version == '14')
[generated/test_conformance__glsl__misc__large-loop-compile.html]
skip-if = (os == 'android' && android_version == '14')

####################
# Crashes on android 2.3 slaves
[generated/test_conformance__glsl__bugs__compare-loop-index-to-uniform.html]
skip-if = (os == 'android' && android_version == '9')

########################################################################
########################################################################
# B2G
[generated/test_conformance__textures__tex-image-and-uniform-binding-bugs.html]
# Intermittently asserts on 'B2G ICS Emulator Debug'.
skip-if = (os == 'b2g')
[generated/test_conformance__glsl__reserved___webgl_function.vert.html]
fail-if = (os == 'b2g')
[generated/test_conformance__glsl__reserved__webgl_function.vert.html]
fail-if = (os == 'b2g')
[generated/test_conformance__misc__error-reporting.html]
fail-if = (os == 'b2g')
[generated/test_conformance__programs__get-active-test.html]
fail-if = (os == 'b2g')


########################################################################
########################################################################
# Linux
[generated/test_conformance__extensions__webgl-draw-buffers.html]
# Crashes
skip-if = (os == 'linux')
[generated/test_conformance__glsl__functions__glsl-function-atan.html]
# Crashes
skip-if = (os == 'linux')
[generated/test_conformance__limits__gl-min-textures.html]
# mesa upgrade issues or task cluster issues- we just need it green; bug 1220658
skip-if = (os == 'linux')
[generated/test_conformance__ogles__GL__notEqual__notEqual_001_to_008.html]
# Crashes
skip-if = (os == 'linux')
[generated/test_conformance__ogles__GL__sign__sign_001_to_006.html]
# Crashes
skip-if = (os == 'linux')
[generated/test_conformance__textures__tex-image-and-sub-image-2d-with-image-data.html]
# Crashes
skip-if = (os == 'linux')

########################################################################
########################################################################
# Mac
[generated/test_conformance__canvas__drawingbuffer-static-canvas-test.html]
# Intermittent crash on OSX.
skip-if = (os == 'mac')
[generated/test_conformance__canvas__viewport-unchanged-upon-resize.html]
# New OSX r7 machines and 10.10.5 is causing perma failure (bug 1216549)
skip-if = (os == 'mac')
[generated/test_conformance__glsl__constructors__glsl-construct-bvec3.html]
# Crashes
skip-if = (os == 'mac')

####################
# 10.6
[generated/test_conformance__glsl__misc__glsl-function-nodes.html]
fail-if = (os == 'mac' && os_version == '10.6')

####################
# 10.8
[generated/test_conformance__glsl__functions__glsl-function-smoothstep-gentype.html]
fail-if = (os == 'mac' && os_version == '10.8')
[generated/test_conformance__glsl__variables__gl-pointcoord.html]
fail-if = (os == 'mac' && os_version == '10.8')

####################
# 10.10
[generated/test_conformance__rendering__line-loop-tri-fan.html]
fail-if = (os == 'mac' && os_version == '10.10')
[generated/test_conformance__rendering__point-size.html]
fail-if = (os == 'mac' && os_version == '10.10')
[generated/test_conformance__textures__copy-tex-image-and-sub-image-2d.html]
fail-if = (os == 'mac' && os_version == '10.10')

########################################################################
########################################################################
# Win
